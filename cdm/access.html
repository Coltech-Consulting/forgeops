<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>UI and API Access :: ForgeRock DevOps Documentation</title>
    <link rel="canonical" href="https://ea.forgerock.com/docs/forgeops/forgeops/cdm/access.html">
    <link rel="prev" href="deploy.html">
    <link rel="next" href="gke/remove.html">
    <meta name="generator" content="Antora 2.3.1">
    <link rel="stylesheet" href="https://cdn.forgerock.com/docs-ui/adoc/dev/vendor.antora-styles.css">
    <link rel="stylesheet" href="https://cdn.forgerock.com/docs-ui/adoc/dev/forgerock.antora-styles.css">
  </head>
  <body class="article">
<backstage-site-header active-item="docs"></backstage-site-header>
<div class="body">
<div class="nav-container" data-component="forgeops" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">ForgeOps</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <span class="nav-text  nav-item-toggle">Read This First</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    
    <a class="nav-link" href="../start/start-here.html">Start Here</a>
    
  </li>
  <li class="nav-item" data-depth="2">
    
    <a class="nav-link" href="../start/start-here-skills.html">Assess Your Skill Level</a>
    
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    
    <a class="nav-link" href="../forgeops.html">About the <code>forgeops</code> Repository (Pre-Release)</a>
    
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <span class="nav-text  nav-item-toggle">Cloud Developer's Kit (CDK)</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    
    <a class="nav-link" href="../cdk/overview.html">Overview</a>
    
  </li>
  <li class="nav-item" data-depth="1">
    
    <a class="nav-link" href="../cdk/intro.html">About the CDK</a>
    
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text  nav-item-toggle">CDK Architecture</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    
    <a class="nav-link" href="../cdk/minikube/concepts.html">On Minikube</a>
    
  </li>
  <li class="nav-item" data-depth="2">
    
    <a class="nav-link" href="../cdk/cloud/concepts.html">On a Shared Cluster</a>
    
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text  nav-item-toggle">Environment Setup</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-item-toggle">
    <a class="nav-link" href="../cdk/minikube/setup/overview.html">Minikube</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    
    <a class="nav-link" href="../cdk/minikube/setup/forgeops.html"><code>forgeops</code> Repository</a>
    
  </li>
  <li class="nav-item" data-depth="3">
    
    <a class="nav-link" href="../cdk/minikube/setup/sw.html">Third-Party Software</a>
    
  </li>
  <li class="nav-item" data-depth="3">
    
    <a class="nav-link" href="../cdk/minikube/setup/vm.html">Minikube Virtual Machine</a>
    
  </li>
  <li class="nav-item" data-depth="3">
    
    <a class="nav-link" href="../cdk/minikube/setup/namespace.html">Namespace</a>
    
  </li>
  <li class="nav-item" data-depth="3">
    
    <a class="nav-link" href="../cdk/minikube/setup/hostname.html">Hostname Resolution</a>
    
  </li>
  <li class="nav-item" data-depth="3">
    
    <a class="nav-link" href="../cdk/minikube/setup/docker.html">Minikube&#8217;s Docker Engine</a>
    
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-item-toggle">
    <a class="nav-link" href="../cdk/cloud/setup/overview.html">Shared Cluster</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-text  nav-item-toggle">GKE</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="../cdk/cloud/setup/gke/forgeops.html"><code>forgeops</code> Repository</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="../cdk/cloud/setup/gke/sw.html">Third-Party Software</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="../cdk/cloud/setup/gke/clusterinfo.html">Cluster Details</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="../cdk/cloud/setup/gke/context.html">Context for the Shared Cluster</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="../cdk/cloud/setup/gke/namespace.html">Namespace</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="../cdk/cloud/setup/gke/hostname.html">Hostname Resolution</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="../cdk/cloud/setup/gke/docker.html"><code>docker push</code> Setup</a>
    
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-text  nav-item-toggle">EKS</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="../cdk/cloud/setup/eks/forgeops.html"><code>forgeops</code> Repository</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="../cdk/cloud/setup/eks/sw.html">Third-Party Software</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="../cdk/cloud/setup/eks/clusterinfo.html">Cluster Details</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="../cdk/cloud/setup/eks/context.html">Context for the Shared Cluster</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="../cdk/cloud/setup/eks/namespace.html">Namespace</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="../cdk/cloud/setup/eks/hostname.html">Hostname Resolution</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="../cdk/cloud/setup/eks/docker.html"><code>docker push</code> Setup</a>
    
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-text  nav-item-toggle">AKS</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="../cdk/cloud/setup/aks/forgeops.html"><code>forgeops</code> Repository</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="../cdk/cloud/setup/aks/sw.html">Third-Party Software</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="../cdk/cloud/setup/aks/clusterinfo.html">Cluster Details</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="../cdk/cloud/setup/aks/context.html">Context for the Shared Cluster</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="../cdk/cloud/setup/aks/namespace.html">Namespace</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="../cdk/cloud/setup/aks/hostname.html">Hostname Resolution</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="../cdk/cloud/setup/aks/docker.html"><code>docker push</code> Setup</a>
    
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    
    <a class="nav-link" href="../cdk/deploy.html">Deployment</a>
    
  </li>
  <li class="nav-item" data-depth="1">
    
    <a class="nav-link" href="../cdk/access.html">UI and API Access</a>
    
  </li>
  <li class="nav-item" data-depth="1">
    
    <a class="nav-link" href="../cdk/develop.html">Custom Docker Image Development</a>
    
  </li>
  <li class="nav-item" data-depth="1">
    
    <a class="nav-link" href="../cdk/troubleshoot.html">CDK Troubleshooting</a>
    
  </li>
  <li class="nav-item" data-depth="1">
    
    <a class="nav-link" href="../cdk/shutdown.html">Shutdown and Removal</a>
    
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <span class="nav-text  nav-item-toggle">Cloud Deployment Model (CDM)</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    
    <a class="nav-link" href="overview.html">Overview</a>
    
  </li>
  <li class="nav-item" data-depth="1">
    
    <a class="nav-link" href="intro.html">About the CDM</a>
    
  </li>
  <li class="nav-item" data-depth="1">
    
    <a class="nav-link" href="architecture.html">CDM Architecture</a>
    
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text  nav-item-toggle">CDM Cookbook</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-text  nav-item-toggle">Environment Setup</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-item-toggle">
    <a class="nav-link" href="gke/setup/setup-env.html">GKE</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="gke/setup/sw.html">Third-Party Software</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="gke/setup/project.html">Google Cloud Project Setup</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="gke/setup/forgeops.html"><code>forgeops</code> Repository</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="gke/setup/cluster.html">Kubernetes Cluster Creation</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="gke/setup/secret-agent.html">Secret Agent Operator</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="gke/setup/nginx.html">NGINX Ingress Controller</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="gke/setup/cert-manager.html">Certificate Manager</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="gke/setup/prometheus.html">Prometheus, Grafana, and Alertmanager</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="gke/setup/push.html"><span class="command"><code>docker push</code></span> Setup</a>
    
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-item-toggle">
    <a class="nav-link" href="eks/setup/setup-env.html">EKS</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="eks/setup/architecture.html">Architecture Overview</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="eks/setup/sw.html">Third-Party Software</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="eks/setup/aws-env.html">AWS Environment Setup</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="eks/setup/forgeops.html"><code>forgeops</code> Repository</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="eks/setup/cluster.html">Kubernetes Cluster Creation</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="eks/setup/secret-agent.html">Secret Agent Operator</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="eks/setup/nginx.html">NGINX Ingress Controller</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="eks/setup/cert-manager.html">Certificate Manager</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="eks/setup/prometheus.html">Prometheus, Grafana, and Alertmanager</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="eks/setup/push.html"><span class="command"><code>docker push</code></span> Setup</a>
    
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-item-toggle">
    <a class="nav-link" href="aks/setup/setup-env.html">AKS</a>
    </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="aks/setup/sw.html">Third-Party Software</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="aks/setup/subscription.html">Azure Subscription Setup</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="aks/setup/forgeops.html"><code>forgeops</code> Repository</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="aks/setup/cluster.html">Kubernetes Cluster Creation</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="aks/setup/secret-agent.html">Secret Agent Operator</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="aks/setup/nginx.html">NGINX Ingress Controller</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="aks/setup/cert-manager.html">Certificate Manager</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="aks/setup/prometheus.html">Prometheus, Grafana, and Alert Manager</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    
    <a class="nav-link" href="aks/setup/push.html"><span class="command"><code>docker push</code></span> Setup</a>
    
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    
    <a class="nav-link" href="deploy.html">CDM Deployment</a>
    
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    
    <a class="nav-link" href="access.html">UI and API Access</a>
    
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text  nav-item-toggle">CDM Removal</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    
    <a class="nav-link" href="gke/remove.html">GKE</a>
    
  </li>
  <li class="nav-item" data-depth="3">
    
    <a class="nav-link" href="eks/remove.html">EKS</a>
    
  </li>
  <li class="nav-item" data-depth="3">
    
    <a class="nav-link" href="aks/remove.html">AKS</a>
    
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    
    <a class="nav-link" href="next-steps.html">Next Steps</a>
    
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <span class="nav-text  nav-item-toggle">Deployment Topics</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    
    <a class="nav-link" href="../deployment/overview.html">Overview</a>
    
  </li>
  <li class="nav-item" data-depth="1">
    
    <a class="nav-link" href="../deployment/base-docker-images.html">Base Docker Images</a>
    
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text  nav-item-toggle">Backup and Restore</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    
    <a class="nav-link" href="../deployment/backup-restore.html">Overview</a>
    
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text  nav-item-toggle">Cloud Storage Setup</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    
    <a class="nav-link" href="../deployment/backup/gcs-backup.html">On Google Cloud</a>
    
  </li>
  <li class="nav-item" data-depth="3">
    
    <a class="nav-link" href="../deployment/backup/aws-backup.html">On AWS</a>
    
  </li>
  <li class="nav-item" data-depth="3">
    
    <a class="nav-link" href="../deployment/backup/azure-backup.html">On Azure</a>
    
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    
    <a class="nav-link" href="../deployment/backup/backup-schedule.html">Enable DS Backup Schedules</a>
    
  </li>
  <li class="nav-item" data-depth="2">
    
    <a class="nav-link" href="../deployment/backup/backup-restore.html">CDM Automatic Restore</a>
    
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    
    <a class="nav-link" href="../deployment/monitoring.html">Monitoring</a>
    
  </li>
  <li class="nav-item" data-depth="1">
    
    <a class="nav-link" href="../deployment/security.html">Security</a>
    
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text  nav-item-toggle">CDM Benchmarks</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    
    <a class="nav-link" href="../deployment/benchmark/overview.html">Overview</a>
    
  </li>
  <li class="nav-item" data-depth="2">
    
    <a class="nav-link" href="../deployment/benchmark/intro.html">About CDM Benchmarking</a>
    
  </li>
  <li class="nav-item" data-depth="2">
    
    <a class="nav-link" href="../deployment/benchmark/sw.html">Third-Party Software</a>
    
  </li>
  <li class="nav-item" data-depth="2">
    
    <a class="nav-link" href="../deployment/benchmark/testusers.html">Test User Generation</a>
    
  </li>
  <li class="nav-item" data-depth="2">
    
    <a class="nav-link" href="../deployment/benchmark/authrate.html">Authentication Rate</a>
    
  </li>
  <li class="nav-item" data-depth="2">
    
    <a class="nav-link" href="../deployment/benchmark/oauth2.html">OAuth 2.0 Authorization Code Flow</a>
    
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    
    <a class="nav-link" href="../rn/rn.html">DevOps Release Notes</a>
    
  </li>
  <li class="nav-item" data-depth="1">
    
    <a class="nav-link" href="../glossary.html">Glossary</a>
    
  </li>
  <li class="nav-item" data-depth="1">
    
    <a class="nav-link" href="../support.html">Support From ForgeRock</a>
    
  </li>
  <li class="nav-item" data-depth="1">
    
    <a class="nav-link" href="../legal.html">Legal Notices</a>
    
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">ForgeOps</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">ForgeOps</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">

  <div class="content">
<article class="doc">
<h1 class="page">UI and API Access</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This page shows you how to access and monitor the ForgeRock Identity Platform components
that make up the CDM.</p>
</div>
<div class="paragraph">
<p>AM and IDM are configured for access through the CDM
cluster&#8217;s Kubernetes ingress controller. You can access these components using
their normal interfaces:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For AM, the console and REST APIs.</p>
</li>
<li>
<p>For IDM, the Admin UI and REST APIs.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>DS cannot be accessed through the ingress controller, but you can use
Kubernetes methods to access the DS pods.</p>
</div>
<div class="paragraph">
<p>For more information about how AM and IDM have been configured in
the CDM, see
<a href="https://github.com/ForgeRock/forgeops/blob/master/README.md#configuration">Configuration</a>
in the <code>forgeops</code> repository&#8217;s top-level README file for more information about
the configurations.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="am-services-cdm"><a class="anchor" href="#am-services-cdm"></a>AM Services</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Access the AM console and REST APIs as follows:</p>
</div>
<div class="openblock procedure">
<div class="title">Access the AM Console</div>
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that the <code>prod</code> namespace is the current namespace:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>kubens prod</strong></pre>
</div>
</div>
</li>
<li>
<p>Obtain the <code>amadmin</code> user&#8217;s password:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>cd /path/to/forgeops/bin</strong>
$ <strong>./print-secrets.sh amadmin</strong>
<span class="cyan-hl">179rd8en9rffa82rcf1qap1z0gv1hcej</span></pre>
</div>
</div>
</li>
<li>
<p>Open a new window or tab in a web browser.</p>
</li>
<li>
<p>Go to <a href="https://prod.iam.example.com/platform" class="bare">https://prod.iam.example.com/platform</a>.</p>
<div class="paragraph">
<p>The Kubernetes ingress controller handles the request, routing it to the
<code>login-ui</code> pod.</p>
</div>
<div class="paragraph">
<p>The login UI prompts you to log in.</p>
</div>
</li>
<li>
<p>Log in as the <code>amadmin</code> user.</p>
<div class="paragraph">
<p>The ForgeRock Identity Platform UI appears in the browser.</p>
</div>
</li>
<li>
<p>Select Native Consoles &gt; Access Management.</p>
<div class="paragraph">
<p>The AM console appears in the browser.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="openblock procedure">
<div class="title">Access the AM REST APIs</div>
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Start a terminal window session.</p>
</li>
<li>
<p>Run a <span class="command"><code>curl</code></span> command to verify that you can access the REST APIs
through the ingress controller. For example:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>curl \
 --insecure \
 --request POST \
 --header "Content-Type: application/json" \
 --header "X-OpenAM-Username: amadmin" \
 --header "X-OpenAM-Password: <span class="cyan-hl">179rd8en9rffa82rcf1qap1z0gv1hcej</span>" \
 --header "Accept-API-Version: resource=2.0" \
 --data "{}" \
 "https://prod.iam.example.com/am/json/realms/root/authenticate"</strong>

{
    "tokenId":"AQIC5wM2&#8230;&#8203;",
    "successUrl":"/am/console",
    "realm":"/"
}</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="idm_services"><a class="anchor" href="#idm_services"></a>IDM Services</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Access the IDM Admin UI and REST APIs as follows:</p>
</div>
<div class="openblock procedure">
<div class="title">Access the IDM Admin UI</div>
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure that the <code>prod</code> namespace is the current namespace:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>kubens prod</strong></pre>
</div>
</div>
</li>
<li>
<p>Obtain the <code>amadmin</code> user&#8217;s password:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>cd /path/to/forgeops/bin</strong>
$ <strong>./print-secrets.sh amadmin</strong>
<span class="cyan-hl">vr58qt11ihoa31zfbjsdxxrqryfw0s31</span></pre>
</div>
</div>
</li>
<li>
<p>Open a new window or tab in a web browser.</p>
</li>
<li>
<p>Go to <a href="https://prod.iam.example.com/platform" class="bare">https://prod.iam.example.com/platform</a>.</p>
<div class="paragraph">
<p>The Kubernetes ingress controller handles the request, routing it to the
<code>login-ui</code> pod.</p>
</div>
<div class="paragraph">
<p>The login UI prompts you to log in.</p>
</div>
</li>
<li>
<p>Log in as the <code>amadmin</code> user.</p>
<div class="paragraph">
<p>The ForgeRock Identity Platform UI appears in the browser.</p>
</div>
</li>
<li>
<p>Select Native Consoles &gt; Identity Management.</p>
<div class="paragraph">
<p>The IDM Admin UI appears in the browser.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="openblock procedure">
<div class="title">Access the IDM REST APIs</div>
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Start a terminal window session.</p>
</li>
<li>
<p>If you haven&#8217;t already done so, get the <code>amadmin</code> user&#8217;s password using the
<span class="command"><code>print-secrets.sh</code></span> command.</p>
</li>
<li>
<p>AM authorizes IDM REST API access using the
<a href="https://ea.forgerock.com/docs/am/oauth2-guide/oauth2-authz-grant.html">OAuth 2.0 authorization code
flow</a>. The CDM comes with the <code>idm-admin-ui</code> client,
which is configured to let you get a bearer token using this OAuth 2.0 flow.
You&#8217;ll use the bearer token in the next step to access the IDM REST API:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Get a session token for the <code>amadmin</code> user:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>curl \
 --request POST \
 --insecure \
 --header "Content-Type: application/json" \
 --header "X-OpenAM-Username: amadmin" \
 --header "X-OpenAM-Password: <span class="cyan-hl">vr58qt11ihoa31zfbjsdxxrqryfw0s31</span>" \
 --header "Accept-API-Version: resource=2.0, protocol=1.0" \
 'https://prod.iam.example.com/am/json/realms/root/authenticate'</strong>
{
 "tokenId":"<span class="pink-hl">AQIC5wM. . .TU3OQ*</span>",
 "successUrl":"/am/console",
 "realm":"/"}</pre>
</div>
</div>
</li>
<li>
<p>Get an authorization code. Specify the ID of the session token that you
obtained in the previous step in the <code>--Cookie</code> parameter:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>curl \
 --dump-header - \
 --insecure \
 --request GET \
 --Cookie "iPlanetDirectoryPro=<span class="pink-hl">AQIC5wM. . .TU3OQ*</span>" \
 "https://prod.iam.example.com/am/oauth2/realms/root/authorize?redirect_uri=https://prod.iam.example.com/platform/appAuthHelperRedirect.html&amp;client_id=idm-admin-ui&amp;scope=openid%20fr:idm:*&amp;response_type=code&amp;state=abc123"</strong>
HTTP/2 302
server: nginx/1.17.10
date: Tue, 29 Sep 2020 16:54:20 GMT
content-length: 0
location: <a href="https://prod.iam.example.com/platform/appAuthHelperRedirect.html" class="bare">https://prod.iam.example.com/platform/appAuthHelperRedirect.html</a>
 ?code=<span class="green-hl">3cItL9G52DIiBdfXRngv2_dAaYM</span>&amp;iss=http://prod.iam.example.com:80/am/oauth2&amp;state=abc123
 &amp;client_id=idm-admin-ui
set-cookie: route=1595350461.029.542.7328; Path=/am; Secure; HttpOnly
x-frame-options: SAMEORIGIN
x-content-type-options: nosniff
cache-control: no-store
pragma: no-cache
set-cookie: OAUTH_REQUEST_ATTRIBUTES=DELETED; Expires=Thu, 01 Jan 1970 00:00:00 GMT; Path=/; HttpOnly
strict-transport-security: max-age=15724800; includeSubDomains</pre>
</div>
</div>
</li>
<li>
<p>Exchange the authorization code for an access token. Specify the access code
that you obtained in the previous step in the <code>code</code> URL parameter:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>curl --request POST \
 --insecure \
 --data "grant_type=authorization_code" \
 --data "code=<span class="green-hl">3cItL9G52DIiBdfXRngv2_dAaYM</span>" \
 --data "client_id=idm-admin-ui" \
 --data "redirect_uri=https://prod.iam.example.com/platform/appAuthHelperRedirect.html" \
 "https://prod.iam.example.com/am/oauth2/realms/root/access_token" </strong>
{
 "access_token":"<span class="orange-hl">oPzGzGFY1SeP2RkI-ZqaRQC1cDg</span>",
 "scope":"openid fr:idm:*",
 "id_token":"eyJ0eXAiOiJKV
  . . .
  sO4HYqlQ",
 "token_type":"Bearer",
 "expires_in":239
}</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Run a <span class="command"><code>curl</code></span> command to verify that you can access the
<code>openidm/config</code> REST endpoint through the ingress controller. Use the
access token returned in the previous step as the bearer token in the
authorization header.</p>
<div class="paragraph">
<p>The following example command provides information about the IDM
configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>curl \
 --insecure \
 --request GET \
 --header "Authorization: Bearer <span class="orange-hl">oPzGzGFY1SeP2RkI-ZqaRQC1cDg</span>" \
 --data "{}" \
 <a href="https://prod.iam.example.com/openidm/config" class="bare">https://prod.iam.example.com/openidm/config</a></strong>
{
 "_id":"",
 "configurations":
  [
   {
    "_id":"ui.context/admin",
    "pid":"ui.context.4f0cb656-0b92-44e9-a48b-76baddda03ea",
    "factoryPid":"ui.context"
    },
    . . .
   ]
}</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="directory_services"><a class="anchor" href="#directory_services"></a>Directory Services</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The DS pods in the CDM are not exposed outside of the cluster.
If you need to access one of the DS pods, use a standard Kubernetes method:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Execute shell commands in DS pods using the <span class="command"><code>kubectl exec</code></span>
command.</p>
</li>
<li>
<p>Forward a DS pod&#8217;s LDAPS port (1636) to your local computer. Then, you
can run LDAP CLI commands, for example <span class="command"><code>ldapsearch</code></span>. You can also
use an LDAP editor such as Apache Directory Studio to access the directory.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For all CDM directory pods, the directory superuser DN is <code>uid=admin</code>.
Obtain this user&#8217;s password by running the <strong>print-secrets.sh dsadmin</strong> command.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cdm-monitoring"><a class="anchor" href="#cdm-monitoring"></a>CDM Monitoring</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To start the Grafana UI, go to <a href="http://grafana.iam.example.com" class="bare">http://grafana.iam.example.com</a>. Log in to Grafana
as the <code>admin</code> user. The password is <code>password</code>.</p>
</div>
<div class="paragraph">
<p>To start the Prometheus UI, go to <a href="http://prometheus.iam.example.com" class="bare">http://prometheus.iam.example.com</a>.</p>
</div>
<div class="paragraph">
<p>For more information on the web UIs:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://docs.grafana.org">Grafana</a></p>
</li>
<li>
<p><a href="https://prometheus.io/docs/introduction/overview">Prometheus</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For a description of the CDM monitoring architecture and information
about how to customize CDM monitoring, see
<a href="../deployment/monitoring.html" class="page">Monitoring Customizations</a>.</p>
</div>
<h2 id="next_step" class="discrete">Next Step</h2>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-check-square-o"></i> <a href="intro.html" class="page">Become familiar with the CDM</a></p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> <a href="architecture.html" class="page">Understand CDM architecture</a></p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> Set up your local environment and create a cluster (<a href="gke/setup/setup-env.html" class="page">GKE</a>|<a href="eks/setup/setup-env.html" class="page">EKS</a>|<a href="aks/setup/setup-env.html" class="page">AKS</a>)</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> <a href="deploy.html" class="page">Deploy the platform</a></p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> <a href="#">Access platform UIs and APIs</a></p>
</li>
<li>
<p><i class="fa fa-square-o"></i> <mark><a href="next-steps.html" class="page">Explore your deployment and start planning for production</a></mark></p>
</li>
</ul>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="deploy.html">CDM Deployment</a></span>
  <span class="next"><a href="gke/remove.html">GKE</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
  <div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">ForgeOps</a></li>
    <li>Cloud Deployment Model (CDM)</li>
    <li>CDM Cookbook</li>
    <li><a href="access.html">UI and API Access</a></li>
  </ul>
</nav>
</div>
</main>
</div>
<backstage-site-footer></backstage-site-footer>
<script src="https://cdn.forgerock.com/docs-ui/adoc/dev/vendor.antora-scripts.js"></script>
<script src="https://cdn.forgerock.com/docs-ui/adoc/dev/forgerock.antora-scripts.js"></script>
  </body>
</html>
